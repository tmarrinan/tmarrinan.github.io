<!DOCTYPE html>
<html>
<head>
<title>Tommy Marrinan: Research</title>
<link rel="stylesheet" type="text/css" href="css/style.css" media="screen" />
<script type="text/javascript" src="scripts/navigation.js"></script>
<script type="text/javascript">
	function init() {
		initNavigation();
		getJSON("data/research.json", populateResearch);
	}

	function populateResearch(error, data) {
		if (error) return;

		var content = document.getElementById("content");

		var i, j;
		var date, title, img, img_link, desc_container, desc_paragraph, clear, spacer;
		for (i=0; i<data.research.length; i++) {
			date = document.createElement("h3");
			date.innerHTML = data.research[i].dates;
			content.appendChild(date);
			title = document.createElement("h3");
			if (data.research[i].link !== undefined) {
				title_link = document.createElement("a");
				title_link.href = data.research[i].link;
				title_link.innerHTML = data.research[i].title;
				title.appendChild(title_link);
			}
			else {
				title.style.color = "#AF5252";
				title.style.fontStyle = "italic";
				title.innerHTML = data.research[i].title;
			}
			content.appendChild(title);
			img = document.createElement("img");
			img.src = data.research[i].image.url;
			img.width = data.research[i].image.width;
			img.height = data.research[i].image.height;
			if (data.research[i].link !== undefined) {
				img_link = document.createElement("a");
				img_link.href = data.research[i].link;
				img_link.appendChild(img);
				content.appendChild(img_link);
			}
			else {
				content.appendChild(img);
			}
			desc_container = document.createElement("div");
			desc_container.className = "research_description";
			for (j=0; j<data.research[i].description.length; j++) {
				desc_paragraph = document.createElement("p");
				desc_paragraph.innerHTML = data.research[i].description[j];
				desc_container.appendChild(desc_paragraph);
			}
			content.appendChild(desc_container);
			clear = document.createElement("div");
			clear.className = "clear";
			content.appendChild(clear);
			spacer = document.createElement("div");
			spacer.className = "vertical_dspacer";
			content.appendChild(spacer);
		}
	}

	function getJSON(url, callback) {
		var xhr = new XMLHttpRequest();
		xhr.open("GET", url, true);
		xhr.onreadystatechange = function() {
			if (xhr.readyState === 4) {
				if (xhr.status === 200) {
					callback(null, JSON.parse(xhr.responseText));
				}
				else {
					callback("Error: File Not Found", null);
				}
			}
		};
		xhr.send();
	}
</script>
</head>

<body onload="init()">
	<div id="main">
		<!-- START: NAVIGATION -->
		<div id="navWrapper">
			<div id="navigation">
			</div>
		</div>
		<!-- END: NAVIGATION -->
		
		<!-- START: MAIN CONTENT -->
		<div id="content">
			<h2>Research</h2>
		</div>
		<!-- END: MAIN CONTENT -->

		<div class="clear"></div>
	</div>
</body>
</html>
