<!DOCTYPE html>
<html>
<head>
<title>Tommy Marrinan: Publications</title>
<link rel="stylesheet" type="text/css" href="css/style.css" media="screen" />
<script type="text/javascript" src="scripts/navigation.js"></script>
<script type="text/javascript">
	function init() {
		initNavigation();
		getJSON("data/publications.json", populatePubList);
	}

	function populatePubList(error, data) {
		if (error) return;

		var conference_title = document.getElementById("conference_title");
		var journal_title = document.getElementById("journal_title");
		var poster_title = document.getElementById("poster_title");
		var thesis_title = document.getElementById("thesis_title");
		var presentation_title = document.getElementById("presentation_title");

		conference_title.textContent += " (" + data.conferences.length + ")";
		journal_title.textContent += " (" + data.journals.length + ")";
		poster_title.textContent += " (" + data.posters.length + ")";
		thesis_title.textContent += " (" + data.theses.length + ")";
		presentation_title.textContent += " (" + data.presentations.length + ")";

		var conference_papers = document.getElementById("conference_papers");
		var journal_articles = document.getElementById("journal_articles");
		var poster_presentations = document.getElementById("poster_presentations");
		var thesis_documents = document.getElementById("thesis_documents");
		var presentation_talks = document.getElementById("presentation_talks");

		initPublications(conference_papers, data.conferences);
		initPublications(journal_articles, data.journals);
		initPublications(poster_presentations, data.posters);
		initPublications(thesis_documents, data.theses);
		initPublications(presentation_talks, data.presentations);
	}

	function initPublications(parent, pubList) {
		var i;
		var div1, div2, div3, title, year, authors, venue, doi, link, award;

		for (i=0; i<pubList.length; i++) {
			div1 = document.createElement("div");
			div1.style.float = "left";
			div1.style.width = "685px";
			div2 = document.createElement("div");
			div2.style.float = "right";
			div2.style.width = "75px";
			div3 = document.createElement("div");
			div3.className = "clear";

			if (pubList[i].title !== undefined) {
				title = document.createElement("p");
				title.className = "pub_title";
				title.innerHTML = pubList[i].title;
				if (pubList[i].award !== undefined) {
					award = document.createElement("img");
					award.width = 16;
					award.height = 15;
					award.style.verticalAlign = "text-top";
					award.style.marginLeft = "3px";
					if (pubList[i].award === "best paper")
						award.src = "images/publications/best_paper.png";
					else if (pubList[i].award === "honorable mention")
						award.src = "images/publications/honorable_mention.png";
					title.appendChild(award);
				}
				div1.appendChild(title);
			}
			if (pubList[i].authors !== undefined) {
				authors = document.createElement("p");
				authors.className = "pub_content";
				authors.innerHTML = pubList[i].authors.replace(/Thomas Marrinan/, "<u>Thomas Marrinan</u>").replace(/T. Marrinan/, "<u>T. Marrinan</u>");
				div1.appendChild(authors);
			}
			if (pubList[i].venue !== undefined) {
				venue = document.createElement("p");
				venue.className = "pub_content";
				venue.innerHTML = pubList[i].venue.replace(/In /, "In <i>").replace(/PhD Thesis/, "<i>PhD Thesis").replace(/(, \d{4}|\()/, "</i>$1");
				div1.appendChild(venue);
			}
			if (pubList[i].doi !== undefined) {
				doi = document.createElement("p");
				doi.className = "pub_content";
				doi.innerHTML = "<a href=" + pubList[i].doi + ">" + pubList[i].doi + "</a>";
				div1.appendChild(doi);
			}
			if (pubList[i].link_text !== undefined && pubList[i].link_url !== undefined) {
				link = document.createElement("p");
				link.className = "pub_content";
				link.innerHTML = "<a href=" + pubList[i].link_url + ">" + pubList[i].link_text + "</a>";
				div1.appendChild(link);
			}
			if (pubList[i].year !== undefined) {
				title.innerHTML += " ";
				year = document.createElement("p");
				year.className = "pub_year";
				year.innerHTML = "(" + pubList[i].year + ")";
				div2.appendChild(year);
			}

			parent.appendChild(div1);
			parent.appendChild(div2);
			parent.appendChild(div3);
		}
	}

	function getJSON(url, callback) {
		var xhr = new XMLHttpRequest();
		xhr.open("GET", url, true);
		xhr.onreadystatechange = function() {
			if (xhr.readyState === 4) {
				if (xhr.status === 200) {
					callback(null, JSON.parse(xhr.responseText));
				}
				else {
					callback("Error: File Not Found", null);
				}
			}
		};
		xhr.send();
	}
</script>
</head>

<body onload="init()">
	<div id="main">
		<!-- START: NAVIGATION -->
		<div id="navigation">
		</div>
		<!-- END: NAVIGATION -->
		
		<!-- START: MAIN CONTENT -->
		<div id="content">
			<!-- START: CONFERENCE / WORKSHOP PAPERS -->
			<div id="conference_papers">
				<h2 id="conference_title">Conference and Workshop Papers</h2>
			</div>
			<div class="vertical_tspacer"></div>
			<!-- END: CONFERENCE / WORKSHOP PAPERS -->

			<!-- START: JOURNAL ARTICLES -->
			<div id="journal_articles">
				<h2 id="journal_title">Journal Articles</h2>
			</div>
			<div class="vertical_tspacer"></div>
			<!-- END: JOURNAL ARTICLES -->

			<!-- START: POSTER PRESENTATIONS -->
			<div id="poster_presentations">
				<h2 id="poster_title">Posters</h2>
			</div>
			<div class="vertical_tspacer"></div>
			<!-- END: POSTER PRESENTATIONS -->

			<!-- START: THESIS DOCUMENT -->
			<div id="thesis_documents">
				<h2 id="thesis_title">Thesis</h2>
			</div>
			<div class="vertical_tspacer"></div>
			<!-- END: THESIS DOCUMENT -->

			<!-- START: PRESENTATION TALKS -->
			<div id="presentation_talks">
				<h2 id="presentation_title">Other Presentations</h2>
			</div>
			<div class="vertical_tspacer"></div>
			<!-- START: PRESENTATION TALKS -->

			<hr />
			<div class="vertical_spacer"></div>
			
			<!-- START: AWARD LEGEND -->
			<div>
				<p><img src="images/publications/best_paper.png" width="16" height="15" style="vertical-align: text-top;"> = Best Paper</p>
				<p><img src="images/publications/honorable_mention.png" width="16" height="15" style="vertical-align: text-top;"> = Honorable Mention</p>
			</div>
			<div class="vertical_spacer"></div>
			<!-- END: AWARD LEGEND -->
		</div>
		<!-- END: MAIN CONTENT -->

		<div class="clear"></div>
	</div>
</body>
</html>
